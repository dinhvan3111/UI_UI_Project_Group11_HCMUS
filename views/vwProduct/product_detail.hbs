{{#section 'title'}}
<title>{{product.title}} - BestGear</title>
{{/section}}

<div class="container">
    <nav class="current-path"
        style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34;);"
        aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/"><i class="fa-solid fa-house"></i></a></li>
            <li class="breadcrumb-item"><a href="/products">Sản phẩm</a></li>
            <li class="breadcrumb-item"><a href="/categories/{{categoryOfProduct._id}}">{{categoryOfProduct.name}}</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page"><a
                    href="/products/{{product._id}}">{{product.title}}</a>
            </li>
        </ol>
    </nav>
    <div class="container product-detail-image-container">
        <div class="row d-flex justify-content-center">
            <div class="card">
                <div class="row mb-5 product-detail-content">
                    {{!-- Image --}}
                    <div class="col-md-6">
                        <div id="sync1" class="owl-carousel owl-theme carousel-images">
                            {{#each product.imgs}}
                            <div class="item">
                                <img class="main-img" src="{{getImgLink this}}">
                            </div>
                            {{/each}}
                        </div>

                        <div id="sync2" class="d-flex owl-carousel owl-theme">
                            {{#each product.imgs}}
                            <div class="thumbnail">
                                <img class="main-img" src="{{getImgLink this}}">
                            </div>
                            {{/each}}
                        </div>
                    </div>
                    {{!-- Product info --}}
                    <div class="col-md-6 product-detail-description-container">


                        <div class="product-info-group">
                            {{!-- Title --}}
                            <h1 class="product-detail-title">{{product.title}}</h1>
                            {{!-- Description --}}
                            {{!-- <div class="product-detail-desription">
                                {{product.description}}
                            </div> --}}
                            {{!-- Price info --}}
                            <div class="product-price-container">
                                <div class="star">
                                    <div class="star--item"><i class="fa-solid fa-star"></i></div>
                                    <div class="star--item"><i class="fa-solid fa-star"></i></div>
                                    <div class="star--item"><i class="fa-solid fa-star"></i></div>
                                    <div class="star--item"><i class="fa-solid fa-star"></i></div>
                                    <div class="star--item"><i class="fa-solid fa-star"></i></div>
                                </div>
                                <div class="product-price">
                                    <p class="product-sale-price">
                                        {{format_number product.sale_price}}đ
                                    </p>

                                    <p class="discount">
                                        {{product.percentSale}}%
                                    </p>
                                </div>
                                <p class="product-real-price">
                                    {{format_number product.price}}đ
                                </p>
                                {{!-- <div>
                                    <h4 class="price-text">Trong kho:</h4>
                                    <span style="color: green;">{{product.stock}}</span>
                                </div> --}}
                                <input type="hidden" id="stock" name="stock" value="{{product.stock}}">
                                <div class="product-quantity">
                                    {{!-- <h4 class="price-text">Số lượng</h4>
                                    <span>
                                        <input type="number" id="quantity" name="quantity" value="1" class="qty"
                                            min="1">
                                    </span> --}}
                                    <p>Số lượng</p>
                                    <div class="quantity-group btn-group">
                                        <button type="button" class="btn btn-number btn-number-sub" data-type="minus"><i
                                                class="fa-solid fa-minus"></i></button>
                                        <input type="text" class="input-number text-center" id="quantity" value="1"
                                            name="quantity" min="1" max="100" pattern="[0-9]*">
                                        <button type="button" class="btn btn-number btn-number-plus" data-type="plus"><i
                                                class="fa-solid fa-plus"></i></button>
                                    </div>
                                </div>

                            </div>
                            {{!-- Button --}}
                            <div class="cart product-action-container">
                                {{#if lcAuthUser}}
                                <button data-bs-toggle="modal" data-bs-target="#addToCartModal" class="btn-add-to-cart"
                                    onclick="addToCart('{{product._id}}')">
                                    <i class="fa-solid fa-cart-plus"></i> Thêm vào giỏ hàng
                                </button>
                                <button class="btn-favortie">
                                    <i class="fa-brands fa-gratipay"></i> Yêu thích
                                </button>

                                {{else}}

                                <a href="/login">
                                    <button class="btn-add-to-cart">
                                        <i class="fa-solid fa-cart-plus"></i> Đăng nhập để mua hàng
                                    </button>
                                </a>
                                <a href="/login">
                                    <button class="btn-favortie">
                                        <i class="fa-brands fa-gratipay"></i> Đăng nhập để yêu
                                        thích
                                    </button>
                                </a>
                                {{/if}}
                            </div>
                        </div>

                        <!-- Sale Policy -->
                        <div class="product-detail-sale-policy">
                            <h3>Chính sách bán hàng</h3>
                            <div>
                                <ul>
                                    <li class="sale-policy-item">
                                        <i class="fa-solid fa-truck-fast"></i>
                                        <span>Miễn phí giao hàng cho đơn hàng từ 800.000đ</span>
                                    </li>
                                    <li class="sale-policy-item">
                                        <i class="fa-solid fa-badge-check"></i>
                                        <span>Cam kết hàng chính hãng 100%</span>
                                    </li>
                                    <li class="sale-policy-item">
                                        <i class="fa-solid fa-rotate"></i>
                                        <span>Đổi trả trong vòng 10 ngày</span>
                                    </li>
                                </ul>
                            </div>
                            <h3>Dịch vụ khác</h3>
                            <div>
                                <ul>
                                    <li class="sale-policy-item">
                                        <i class="fa-solid fa-gear"></i>
                                        <span>Sửa chữa đồng giá 150.000đ</span>
                                    </li>
                                    <li class="sale-policy-item">
                                        <i class="fa-solid fa-display"></i>
                                        <span>Vệ sinh máy tính, laptop</span>
                                    </li>
                                    <li class="sale-policy-item">
                                        <i class="fa-solid fa-shield-check"></i>
                                        <span>Bảo hành tại nhà</span>
                                    </li>

                                </ul>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="row product-detail-nav-container">
                {{!-- Tab navs --}}
                <ul class="nav nav-tabs product-detail-navbar" id="myTab" role="tablist">
                    <li class="nav-item product-detail-nav-item" role="presentation">
                        <button class="nav-link active link-dark" id="des-tab" data-bs-toggle="tab"
                            data-bs-target="#description" type="button" role="tab" aria-controls="description"
                            aria-selected="true">Mô tả chi tiết</button>
                    </li>
                    <li class="nav-item product-detail-nav-item" role="presentation">
                        <button class="nav-link link-dark" id="waranty-tab" data-bs-toggle="tab"
                            data-bs-target="#waranty" type="button" role="tab" aria-controls="waranty"
                            aria-selected="false">
                            Thông tin bảo hành
                        </button>
                    </li>
                    <li class="nav-item product-detail-nav-item" role="presentation">
                        <button class="nav-link link-dark" id="review-tab" data-bs-toggle="tab" data-bs-target="#review"
                            type="button" role="tab" aria-controls="review" aria-selected="false">
                            Đánh giá (0)
                        </button>
                    </li>
                </ul>
                {{!-- Tab content --}}
                <div class="tab-content product-detail-nav-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="des-tab">
                        <div class="des-wrap">{{{product.description}}}
                            <div class="gradient"></div>
                        </div>
                        <div class="read-more"><button>Xem thêm</button></div>
                    </div>
                    <div class="tab-pane fade" id="waranty" role="tabpanel" aria-labelledby="waranty-tab">
                        {{{product.waranty}}}
                    </div>
                    {{!-- Review content --}}
                    <div class="tab-pane fade" id="review" role="tabpanel" aria-labelledby="review-tab">
                        {{!-- User's self scoring --}}
                        <form>
                            <div class="d-flex self-review-container">
                                <div class="self-rating">
                                    <p>Mức độ hài lòng của bạn về sản phẩm</p>
                                    <div class="rating">
                                        <input type="radio" id="star5" name="rate" value="5" />
                                        <label for="star5"></label>
                                        <input type="radio" id="star4" name="rate" value="4" />
                                        <label for="star4"></label>
                                        <input type="radio" id="star3" name="rate" value="3" />
                                        <label for="star3"></label>
                                        <input type="radio" id="star2" name="rate" value="2" />
                                        <label for="star2"></label>
                                        <input type="radio" id="star1" name="rate" value="1" />
                                        <label for="star1"></label>
                                    </div>
                                </div>
                                <div class="self-comment flex-fill">
                                    <textarea placeholder="Hãy chia sẽ trải nghiệm của bạn về sản phẩm này"
                                        rows="3"></textarea>
                                    <input type="submit"></input>
                                </div>
                            </div>
                        </form>
                        {{!-- Others review --}}
                        <div class="card review-card">
                            {{!-- Review header --}}
                            <div class="review-header">
                                {{!-- Avatar --}}
                                <div class="avatar-container">
                                    <img src="https://steamuserimages-a.akamaihd.net/ugc/1657851116010446238/4D754FBFFC9992EC79D4136B36177960E4A3112C/?imw=5000&imh=5000&ima=fit&impolicy=Letterbox&imcolor=%23000000&letterbox=false"
                                        class="avatar">
                                </div>
                                {{!-- Username + score --}}
                                <div class="info-container">
                                    <div class="card-title">Wibu rách</div>
                                    <small class="text-muted">22-07-2022</small>
                                    <div class="star">
                                        <span class="review-score"><i class="fa-solid fa-star"></i></span>
                                        <span class="review-score"><i class="fa-solid fa-star"></i></span>
                                        <span class="review-score"><i class="fa-solid fa-star"></i></span>
                                        <span class="review-score"><i class="fa-solid fa-star"></i></span>
                                        <span class="review-score"><i class="fa-regular fa-star"></i></span>
                                    </div>
                                </div>
                            </div>
                            {{!-- Review text --}}
                            <div class="card-body">
                                <p class="card-text">
                                    Sản phẩm ok xài ngon không. Dùng tốt hơn gear văn phỏng ghẻ
                                </p>
                            </div>
                        </div>
                        <div class="card review-card">
                            {{!-- Review header --}}
                            <div class="review-header">
                                {{!-- Avatar --}}
                                <div class="avatar-container">
                                    <img src="https://steamuserimages-a.akamaihd.net/ugc/1657851116010446238/4D754FBFFC9992EC79D4136B36177960E4A3112C/?imw=5000&imh=5000&ima=fit&impolicy=Letterbox&imcolor=%23000000&letterbox=false"
                                        class="avatar">
                                </div>
                                {{!-- Username + score --}}
                                <div class="info-container">
                                    <div class="card-title">Wibu rách</div>
                                    <small class="text-muted">22-07-2022</small>
                                    <div class="star">
                                        <span class="review-score"><i class="fa-solid fa-star"></i></span>
                                        <span class="review-score"><i class="fa-solid fa-star"></i></span>
                                        <span class="review-score"><i class="fa-solid fa-star"></i></span>
                                        <span class="review-score"><i class="fa-solid fa-star"></i></span>
                                        <span class="review-score"><i class="fa-regular fa-star"></i></span>
                                    </div>
                                </div>
                            </div>
                            {{!-- Review text --}}
                            <div class="card-body">
                                <p class="card-text">
                                    Sản phẩm ok xài ngon không. Dùng tốt hơn gear văn phỏng ghẻ
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="related-products">
                <div class="title">Sản phẩm liên quan</div>
                <div class="content">
                    {{#each relatedProducts }}
                    <a href="/products/{{_id}}" class="product-item product-item--col">
                        <div class="thumbnail">
                            {{#if percentSale}}
                            <span class="discount">{{percentSale}}%</span>
                            {{/if}}
                            

                            <div class="icon-action">
                                <div class="icon-action__item"><i class="fa-solid fa-eye"></i></div>
                                <div class="icon-action__item"><i class="fa-solid fa-basket-shopping"></i>
                                </div>
                                <div class="icon-action__item"><i class="fa-solid fa-heart"></i></div>
                            </div>
                            <img class="img-fluid" src="{{getImgLink thumb}}" alt="">
                        </div>
                        <div class="product-desc">
                            <h4 class="name-product"><b>{{title}}</b></h4>
                            <div class="star-comment">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                            </div>
                            <div class="product-price"><b>{{format_number sale_price}} đ</b><span
                                    class="true-price">{{format_number price}} đ</span></b>
                            </div>
                            <button class="buy-now">Mua ngay</button>
                        </div>
                    </a>
                    {{/each}}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="addToCartModal" tabindex="-1" aria-labelledby="addToCartModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-body">
                <img class="icon" src="" alt="">
                <p>Sản phẩm đã được thêm vào giỏ hàng</p>
            </div>
            <div class="modal-footer">
                <button type="button" data-bs-dismiss="modal">Đóng</button>
            </div>


        </div>
    </div>
</div>
<script src="/js/product_detail.js"></script>